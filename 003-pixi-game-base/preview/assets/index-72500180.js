var S=Object.defineProperty;var X=(s,e,i)=>e in s?S(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var c=(s,e,i)=>(X(s,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();let P=null,m=null;const N=function(s){P=s.player,m=s.app},b=()=>P.view.position,p=()=>({width:m.renderer.width,height:m.renderer.height}),k=()=>m.renderer;class z{constructor(){c(this,"view",new PIXI.Container);const e=this.view=new PIXI.Graphics;e.beginFill(2565930),e.drawRect(0,0,50,50),e.endFill(),e.alpha=.99;const i=p();e.width=i.width,e.height=i.height,k().on("resize",()=>{const t=p();e.width=t.width,e.height=t.height})}}const T=function(s){return Math.hypot(s.x,s.y)},j=function(s,e){const i=e.clone();return i.x-=s.x,i.y-=s.y,i},E=function(){let s=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(s=!0)}(navigator.userAgent||navigator.vendor||window.opera),s},F=function(s,e,i){let t=performance.now();return{update:()=>{const n=performance.now();n-t>e&&(t=n,s.call(i))}}};class C{constructor(){c(this,"view",new PIXI.Container);c(this,"velocity",new PIXI.Point(0,0));c(this,"direction",new PIXI.Point(0,0));c(this,"maxVelocity",1);const e=new PIXI.Graphics;e.beginFill(16777215),e.drawRect(0,0,50,50),e.endFill(),this.view=e,this.view.pivot.set(25,25)}update(e){const i=T(this.direction);this.velocity.x=this.direction.x/i*this.maxVelocity||0,this.velocity.y=this.direction.y/i*this.maxVelocity||0,this.view.x+=this.velocity.x*e,this.view.y+=this.velocity.y*e}}class V extends C{constructor(){super();c(this,"maxVelocity",3);this.view.tint=15680580}}class U{constructor(){c(this,"view",new PIXI.Container);c(this,"list",[]);c(this,"spawnTimer",F(this.spawn,1e3,this));for(let e=0;e<10;e++)this.spawn()}spawn(){const e=new V,{width:i,height:t}=p(),n=b();e.view.position.set(Math.random(),Math.random()),Math.random()>.5?e.view.position.x=Math.random()>.5?0:1:e.view.position.y=Math.random()>.5?0:1,e.view.position.x*=i,e.view.position.x-=i/2-n.x,e.view.position.y*=t,e.view.position.y-=t/2-n.y,this.list.push(e),this.view.addChild(e.view)}update(e){this.spawnTimer.update(),this.list.forEach(i=>{const t=j(i.view.position,b());i.direction.copyFrom(t),i.update(e)})}}const f=class extends PIXI.utils.EventEmitter{constructor(){super();c(this,"keys",{w:0,s:0,a:0,d:0,1:0,0:0});c(this,"onKeyDown",({key:i})=>{i in this.keys&&(this.keys[i]=1,this.emit(f.EVENTS.KEYDOWN,{key:i}))});c(this,"onKeyUp",({key:i})=>{i in this.keys&&(this.keys[i]=0,this.emit(f.EVENTS.KEYUP,{key:i}))});window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}};let h=f;c(h,"EVENTS",{KEYDOWN:"KEYDOWN",KEYDOWN:"KEYUP"});const g=class extends PIXI.utils.EventEmitter{constructor(i=16777215){super();c(this,"view",new PIXI.Container);c(this,"pressed",!1);c(this,"direction",new PIXI.Point);const t=new PIXI.Graphics;t.beginFill(i),t.drawCircle(0,0,50),t.endFill(),this.view.addChild(t),this.view.hitArea=new PIXI.Circle(0,0,150);const n=new PIXI.Graphics;n.beginFill(i),n.drawCircle(this.view.hitArea.x,this.view.hitArea.y,this.view.hitArea.radius),n.endFill(),n.alpha=.04,this.view.addChild(n),this.view.interactive=!0,this.view.cursor="pointer";const o=r=>{this.pressed=r,t.tint=r?11184810:16777215,r||t.position.set(0,0),this.direction.copyFrom(t.position),this.emitUpdate()};this.view.on("pointerdown",r=>{this.view.toLocal(r.global,null,t.position),o(!0),this.direction.copyFrom(t.position)}),this.view.on("pointerup",()=>{o(!1)}),this.view.on("pointerupoutside",()=>{o(!1)}),this.view.on("pointerout",()=>{o(!1)}),this.view.on("pointermove",r=>{this.pressed&&(this.view.toLocal(r.global,null,t.position),this.direction.copyFrom(t.position),this.emitUpdate())})}emitUpdate(){this.emit(g.EVENTS.INPUT,{direction:this.direction.clone()})}};let w=g;c(w,"EVENTS",{INPUT:"INPUT"});class D extends C{constructor(){super();c(this,"maxVelocity",5);this.view.tint=8702998}connectWSAD(i){i.on(h.EVENTS.KEYDOWN,({key:t})=>{t==="w"?this.direction.y=-1:t==="s"?this.direction.y=1:t==="a"?this.direction.x=-1:t==="d"&&(this.direction.x=1)}),i.on(h.EVENTS.KEYUP,({key:t})=>{t==="w"?this.direction.y=i.keys.s?1:0:t==="s"?this.direction.y=i.keys.w?-1:0:t==="a"?this.direction.x=i.keys.d?1:0:t==="d"&&(this.direction.x=i.keys.a?-1:0)})}connectJoystick(i){i.on(w.EVENTS.INPUT,({direction:t})=>{this.direction.copyFrom(t),console.log(t)})}}class u extends PIXI.utils.EventEmitter{constructor(i=null,t=16777215){super();c(this,"view",new PIXI.Container);c(this,"pressed",!1);const n=new PIXI.Graphics;if(n.beginFill(t),n.drawRect(0,0,100,100),n.endFill(),this.view.addChild(n),i){const r=new PIXI.Text(i);r.anchor.set(.5,.5),r.position.set(50,50),this.view.addChild(r)}n.interactive=!0,n.cursor="pointer";const o=r=>{this.pressed=r,n.tint=r?14342874:16777215};n.on("pointerdown",()=>{o(!0)}),n.on("pointerup",()=>{o(!1)}),n.on("pointerupoutside",()=>{o(!1)})}}c(u,"EVENTS",{PRESSED:"PRESSED"});class K{constructor(){c(this,"view",new PIXI.Container);c(this,"joystick",null);const e=new PIXI.Container;this.view.addChild(e);const i=new u("1",4841033),t=new u("2",14567753),n=new u("3",4803038),o=E()?1.5:1;console.log(E());const r=()=>{const a=p(),d=(a.height+a.width)*.02*o,y=d*.2;[i,t,n].forEach((x,I)=>{x.view.scale.set(d/100),x.view.position.set(d*I+y*(I+1),0)}),e.y=a.height-d-y};r(),e.addChild(i.view,t.view,n.view),this.joystick=new w(16448250),this.view.addChild(this.joystick.view);const l=()=>{const a=p(),d=(a.height+a.width)*.08*o;this.joystick.view.scale.set(d/300),this.joystick.view.position.set(a.width-d*.5,a.height-d*.5)};l(),k().on("resize",()=>{r(),l()})}}class O{constructor(e){c(this,"view",new PIXI.Container);const i=new D,t=new PIXI.Container;N({player:i,app:e});const n=new h,o=new z,r=new U,l=new K;i.connectWSAD(n),l.joystick&&i.connectJoystick(l.joystick),e.ticker.add(i.update,i),e.ticker.add(r.update,r),t.pivot.set(-e.renderer.width/2,-e.renderer.height/2),e.ticker.add(()=>{t.pivot.set(-e.renderer.width/2+i.view.x,-e.renderer.height/2+i.view.y)}),this.view.addChild(o.view),t.addChild(r.view),t.addChild(i.view),this.view.addChild(t),this.view.addChild(l.view)}}const v=new PIXI.Application({resizeTo:window});document.body.appendChild(v.view);const A=new O(v);v.stage.addChild(A.view);
