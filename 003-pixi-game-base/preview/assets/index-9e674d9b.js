var I=Object.defineProperty;var y=(c,e,i)=>e in c?I(c,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[e]=i;var r=(c,e,i)=>(y(c,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const p=function(c){return Math.hypot(c.x,c.y)};class v{constructor(){r(this,"view",new PIXI.Container);r(this,"velocity",new PIXI.Point(0,0));r(this,"direction",new PIXI.Point(0,0));r(this,"maxVelocity",5);const e=new PIXI.Graphics;e.beginFill(16777215),e.drawRect(0,0,50,50),e.endFill(),this.view=e}update(e){const i=p(this.direction);this.velocity.x=this.direction.x/i*this.maxVelocity||0,this.velocity.y=this.direction.y/i*this.maxVelocity||0,this.view.x+=this.velocity.x*e,this.view.y+=this.velocity.y*e}}class E extends v{constructor(){super(),this.view.tint=15680580}}class m{constructor(e){r(this,"view",new PIXI.Container);for(let i=0;i<10;i++){const s=new E().view;s.position.set(Math.random()*500,Math.random()*500),this.view.addChild(s)}}}const a=class extends PIXI.utils.EventEmitter{constructor(){super();r(this,"keys",{w:0,s:0,a:0,d:0,1:0,0:0});r(this,"onKeyDown",({key:i})=>{i in this.keys&&(this.keys[i]=1,this.emit(a.EVENTS.KEYDOWN,{key:i}))});r(this,"onKeyUp",({key:i})=>{i in this.keys&&(this.keys[i]=0,this.emit(a.EVENTS.KEYUP,{key:i}))});window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}};let d=a;r(d,"EVENTS",{KEYDOWN:"KEYDOWN",KEYDOWN:"KEYUP"});const u=class extends PIXI.utils.EventEmitter{constructor(i=16777215){super();r(this,"view",new PIXI.Container);r(this,"pressed",!1);r(this,"direction",new PIXI.Point);const s=new PIXI.Graphics;s.beginFill(i),s.drawCircle(0,0,50),s.endFill(),this.view.addChild(s),this.view.hitArea=new PIXI.Circle(0,0,75),this.view.interactive=!0,this.view.cursor="pointer";const t=n=>{this.pressed=n,s.tint=n?11184810:16777215,n||s.position.set(0,0),this.direction=s.position.clone(),this.emitUpdate()};this.view.on("pointerdown",n=>{t(!0),this.view.toLocal(n.global,null,s.position)}),this.view.on("pointerup",()=>{t(!1)}),this.view.on("pointerupoutside",()=>{t(!1)}),this.view.on("pointermove",n=>{this.pressed&&(this.view.toLocal(n.global,null,s.position),this.direction.copyFrom(s.position.clone()),this.emitUpdate())})}emitUpdate(){this.emit(u.EVENTS.INPUT,{direction:this.direction.clone()})}};let l=u;r(l,"EVENTS",{INPUT:"INPUT"});class P extends v{constructor(){super(),this.view.tint=8702998}connectWSAD(e){e.on(d.EVENTS.KEYDOWN,({key:i})=>{i==="w"?this.direction.y=-1:i==="s"?this.direction.y=1:i==="a"?this.direction.x=-1:i==="d"&&(this.direction.x=1)}),e.on(d.EVENTS.KEYUP,({key:i})=>{i==="w"?this.direction.y=e.keys.s?1:0:i==="s"?this.direction.y=e.keys.w?-1:0:i==="a"?this.direction.x=e.keys.d?1:0:i==="d"&&(this.direction.x=e.keys.a?-1:0)})}connectJoystick(e){e.on(l.EVENTS.INPUT,({direction:i})=>{this.direction.copyFrom(i)})}}class w extends PIXI.utils.EventEmitter{constructor(i=null,s=16777215){super();r(this,"view",new PIXI.Container);r(this,"pressed",!1);const t=new PIXI.Graphics;if(t.beginFill(s),t.drawRect(0,0,100,100),t.endFill(),this.view.addChild(t),i){const o=new PIXI.Text(i);o.anchor.set(.5,.5),o.position.set(50,50),this.view.addChild(o)}t.interactive=!0,t.cursor="pointer";const n=o=>{this.pressed=o,t.tint=o?14342874:16777215};t.on("pointerdown",()=>{n(!0)}),t.on("pointerup",()=>{n(!1)}),t.on("pointerupoutside",()=>{n(!1)})}}r(w,"EVENTS",{PRESSED:"PRESSED"});class x{constructor(e){r(this,"view",new PIXI.Container);r(this,"joystick",null);const i=new w("1",4841033);i.view.position.set(25,0);const s=new w("2",14567753);s.view.position.set(150,0);const t=new w("3",4803038);t.view.position.set(275,0),this.joystick=new l(16448250),this.joystick.view.position.set(e.renderer.width-75,50),this.view.addChild(i.view,s.view,t.view,this.joystick.view),this.view.y=e.renderer.height-125,e.renderer.on("resize",()=>{this.view.y=e.renderer.height-125,this.joystick.view.x=e.renderer.width-75})}}class g{constructor(e){r(this,"view",new PIXI.Container);const i=new d,s=new x(e),t=new P(e);t.connectWSAD(i),s.joystick&&t.connectJoystick(s.joystick),e.ticker.add(t.update,t);const n=new m(e),o=new PIXI.Graphics;o.beginFill(2565930),o.drawRect(0,0,50,50),o.endFill(),o.alpha=.99,this.view.addChild(o),o.width=e.renderer.width,o.height=e.renderer.height,e.renderer.on("resize",()=>{o.width=e.renderer.width,o.height=e.renderer.height});const h=new PIXI.Container;h.pivot.set(-e.renderer.width/2,-e.renderer.height/2),e.ticker.add(()=>{h.pivot.set(-e.renderer.width/2+t.view.x,-e.renderer.height/2+t.view.y)}),h.addChild(n.view),h.addChild(t.view),this.view.addChild(h),this.view.addChild(s.view)}}const f=new PIXI.Application({resizeTo:window});document.body.appendChild(f.view);const N=new g(f);f.stage.addChild(N.view);
